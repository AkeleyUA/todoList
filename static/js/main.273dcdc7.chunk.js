(this.webpackJsonphomework4=this.webpackJsonphomework4||[]).push([[0],{238:function(e,t,a){e.exports=a(433)},243:function(e,t,a){},244:function(e,t,a){},251:function(e,t,a){},433:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),l=a.n(o),i=(a(243),a(244),a(27)),c=a(29),s=a(48),u=a(16),m=a(203),d=a(23),p=a(57),b=function(e){return{type:"STARTED_TASK_CREATION",payload:e}},E=function(e){return{type:"FINISHED_TASK_CREATION",payload:e}},f=function(e){return{type:"DELETE_TASK",payload:e}},h=function(e){return{type:"PUT_TASKS",payload:e}},v=function(){return{type:"UPLOAD_LOCAL_STOREGE"}},g=function(){return{type:"DOWNLOAD_LOCAL_STOREGE"}},k={tasks:null!==localStorage.getItem("tasks")?JSON.parse(localStorage.getItem("tasks")):[],canAddTask:!1},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STARTED_TASK_CREATION":return Object(p.a)({},e,{tasks:[].concat(Object(d.a)(e.tasks),[{id:t.payload.start,start:t.payload.start,end:0,spend:0,isCompleted:t.payload.isCompleted,hour:t.payload.hour}])});case"FINISHED_TASK_CREATION":return Object(p.a)({},e,{tasks:e.tasks.map((function(a,n){return n===e.tasks.length-1?(a.name=t.payload.name,a.end=t.payload.end,a.spend=t.payload.end-a.start,a.isCompleted=t.payload.isCompleted,a):a}))});case"DELETE_TASK":return Object(p.a)({},e,{tasks:e.tasks.filter((function(e){return e.id!==t.payload}))});case"PUT_TASKS":return Object(p.a)({},e,{tasks:t.payload});default:return e}},O=function(e){return{type:"MODAL_CONTROLER",payload:e}},T={inputError:!1,modalIsOpen:!1,tabValue:0},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MODAL_CONTROLER":return Object(p.a)({},e,{modalIsOpen:t.payload});default:return e}},S=a(20),D=a.n(S),I=a(36),j=D.a.mark(_),C=D.a.mark(L),x=D.a.mark(R),A=function(){return localStorage.removeItem("startLastTask")};function _(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.b)(A);case 2:case"end":return e.stop()}}),j)}function L(){var e;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(I.c)((function(e){return e.tasksManager.tasks[e.tasksManager.tasks.length-1].start}));case 2:e=t.sent,localStorage.setItem("startLastTask",e);case 4:case"end":return t.stop()}}),C)}function R(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.d)("STARTED_TASK_CREATION",L);case 2:return e.next=4,Object(I.d)("FINISHED_TASK_CREATION",_);case 4:case"end":return e.stop()}}),x)}var N=R,M=D.a.mark(W),H=D.a.mark(K);function W(){var e;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(I.c)((function(e){return e.tasksManager.tasks}));case 2:e=t.sent,localStorage.setItem("tasks",JSON.stringify(e));case 4:case"end":return t.stop()}}),M)}function K(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.e)("DOWNLOAD_LOCAL_STOREGE",W);case 2:case"end":return e.stop()}}),H)}var U=K,F=D.a.mark(V);function V(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.a)([U(),N()]);case 2:case"end":return e.stop()}}),F)}var P,B=Object(m.a)(),J=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,z=Object(u.d)((P={tasksManager:y,UI:w},function(e,t){var a={};return Object.entries(P).forEach((function(n){var r=void 0===e?e:e[n[0]];a[n[0]]=n[1](r,t)})),a}),J(Object(u.a)((function(e){return function(t){return function(a){var n=t(a);return console.log(n),console.log("new state: ",e.getState()),n}}}),B)));B.run(V);var G=z,X=a(97),Y=a(98),$=a(453),q=a(456),Q=a(457),Z=a(458),ee=a(459),te=a(460),ae=function(e){var t=Math.floor(e/1e3/60/60%60),a=Math.floor(e/1e3/60%60),n=Math.floor(e/1e3%60);return"".concat(t<10?"0".concat(t):t," :\n    ").concat(a<10?"0".concat(a):a," :\n    ").concat(n<10?"0".concat(n):n)},ne={buttonDelete:{background:X.a[50],borderRadius:0},table:{maxWidth:1440,margin:"0 auto"},tableRow:{background:Y.a[100]},tableBody:{color:Y.a[900]},div:{width:"100%",textAlign:"center",padding:"30px 0"},buttonHome:{background:X.a[50],boxShadow:"0 0 3px rgba(0, 0, 0, 0.3)"}},re=Object(i.b)((function(e){return{tasks:e.tasksManager.tasks}}),(function(e){return{deleteTask:Object(u.b)(f,e)}}))((function(e){var t=e.deleteTask,a=e.tasks,n=e.match,o=a.find((function(e){return e.id===+n.params.id}));return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{className:"tasks-log",style:ne.table},r.a.createElement(q.a,null,r.a.createElement(Q.a,null,r.a.createElement(Z.a,{variant:"body"},"ID"),r.a.createElement(Z.a,{variant:"body"},"Task"),r.a.createElement(Z.a,{variant:"body"},"Time start"),r.a.createElement(Z.a,{variant:"body"},"Time end"),r.a.createElement(Z.a,{variant:"body"},"Time spend"),r.a.createElement(Z.a,{variant:"body"},"Delete"))),r.a.createElement(ee.a,{style:ne.tableBody},r.a.createElement(Q.a,{id:o.id,style:ne.tableRow},r.a.createElement(Z.a,{variant:"head"},r.a.createElement("div",null,o.id)),r.a.createElement(Z.a,{variant:"head"},r.a.createElement("div",null,o.name)),r.a.createElement(Z.a,{variant:"head"},r.a.createElement("div",null,new Date(o.start).toLocaleTimeString())),r.a.createElement(Z.a,{variant:"head"},r.a.createElement("div",null,new Date(o.end).toLocaleTimeString())),r.a.createElement(Z.a,{variant:"head"},r.a.createElement("div",null,ae(o.spend))),r.a.createElement(Z.a,{variant:"head"},r.a.createElement(te.a,{style:ne.buttonDelete,type:"button",component:c.b,onClick:function(){t(o.id)},to:"/log",color:"primary"},"Delete"))))),r.a.createElement("div",{style:ne.div},r.a.createElement(te.a,{style:ne.buttonHome,size:"large",type:"button",color:"primary",component:c.b,to:"/log"},"Home")))})),oe=a(469),le={div:{maxWidth:1440,margin:"0 auto",textAlign:"center",padding:"30px 0"},button:{background:X.a[50],boxShadow:"0 0 3px rgba(0, 0, 0, 0.3)"}},ie=function(e){var t=e.match;return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a,{severity:"error",style:{margin:30}},"A task with id: ".concat(t.params.id," does not exist.")),r.a.createElement("div",{style:le.div},r.a.createElement(te.a,{style:le.button,size:"large",type:"button",color:"primary",component:c.b,to:"/"},"Home")))},ce=Object(i.b)((function(e){return{tasks:e.tasksManager.tasks}}),(function(e){return{uploadLocalStore:Object(u.b)(v,e)}}))((function(e){var t=e.tasks,a=e.match;return void 0!==t.find((function(e){return+a.params.id===e.id}))?r.a.createElement(re,{match:a}):r.a.createElement(ie,{match:a})})),se=a(93),ue=a(46),me=a(188),de=a(189),pe=a(204),be=(a(251),a(463)),Ee=a(464),fe=a(471),he=a(467),ve=a(468),ge=a(465),ke=a(462),ye=a(99),Oe=a(470),Te={div:{position:"absolute",top:"30%",left:"30%",width:600,height:100,background:X.a[50],border:"2px solid #000",padding:20},h2:{color:ye.a[500]},button:{color:ke.a[500],position:"absolute",bottom:15,right:15}},we=Object(i.b)((function(e){return{modalIsOpen:e.UI.modalIsOpen}}),(function(e){return{modalControler:Object(u.b)(O,e)}}))((function(e){var t=e.modalControler,a=e.modalIsOpen,n=function(){t(!1)};return r.a.createElement(Oe.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:a,onClose:n},r.a.createElement("div",{style:Te.div},r.a.createElement("h2",{id:"simple-modal-title",style:Te.h2},"Empty task name"),r.a.createElement("p",{id:"simple-modal-description"},"Your are tring close your task without name, enter the title and try again!"),r.a.createElement(te.a,{style:Te.button,onClick:n},"Close")))})),Se={grid:{maxWidth:1440,margin:"0 auto"},input:{width:"300px",margin:"0 auto",display:"flex"},button:{margin:"0 auto 30px auto",display:"flex",boxShadow:"0 0 3px rgba(0, 0, 0, 0.3)"},tabs:{width:"100%",background:ke.a[700]},tab:{color:X.a[50]}},De=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(me.a)(this,Object(de.a)(t).call(this,e))).startHandler=function(){var e=a.props.startedTaskCreation,t={start:(new Date).getTime(),hour:(new Date).getHours(),isCompleted:!1};a.interval=setInterval((function(){return a.setState({timer:(new Date).getTime()-t.start})}),1e3),e(t)},a.stopHandler=function(){var e=a.props,t=e.finishedTaskCreation,n=e.modalControler,r=a.inputRef.current.value,o={end:(new Date).getTime(),name:r,isCompleted:!0};r.length>0?(clearInterval(a.interval),t(o),a.inputRef.current.value="",a.setState({timer:0}),a.inputError=!1):(n(!0),a.inputRef.current.focus(),a.inputError=!0)},a.state={timer:e.tasks.length>0&&!e.tasks[e.tasks.length-1].isCompleted?(new Date).getTime()-e.tasks[e.tasks.length-1].start:0},a.inputRef=r.a.createRef(),a.tabValue=0,a.inputError=!1,a.interval=null,a}return Object(pe.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.downloadLocalStore,n=t.tasks,r=this.state.timer,o=!(n.length>0&&void 0!==n[n.length-1].isCompleted)||n[n.length-1].isCompleted;o?o&&0!==r&&(clearInterval(this.interval),0!==r&&e.setState({timer:0})):this.interval=setInterval((function(){return e.setState({timer:(new Date).getTime()-n[n.length-1].start})}),1e3),window.addEventListener("beforeunload",a)}},{key:"componentWillUnmount",value:function(){var e=this.props.downloadLocalStore;e(),clearInterval(this.interval),window.removeEventListener("beforeunload",e)}},{key:"render",value:function(){var e=this.props,t=e.tasks,a=e.children,n=e.tabValue,o=!(t.length>0)||t[t.length-1].isCompleted,l=this.state.timer;return r.a.createElement("div",{style:{height:1e3}},r.a.createElement(we,null),r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:Se.grid},r.a.createElement(Ee.a,{maxWidth:!1,className:"task-init"},r.a.createElement(fe.a,{id:"standard-basic",style:Se.input,error:this.inputError,inputProps:{ref:this.inputRef,className:"input-task-name",style:{color:this.inputError?ye.a[500]:Y.a[900],textAlign:"center"}},fullWidth:!0,placeholder:"Name of your task"}),r.a.createElement(he.a,{className:"circle",color:"primary.main",fontWeight:500,fontSize:20},r.a.createElement("p",{className:"time"},ae(l))),r.a.createElement(te.a,{variant:"text",color:"primary",type:"submit",onClick:o?this.startHandler:this.stopHandler,style:Se.button},o?"start":"stop")),r.a.createElement(ve.a,{style:Se.tabs,variant:"fullWidth",value:n},r.a.createElement(ge.a,{style:Se.tab,label:"Tasks log",component:c.b,to:"/log"}),r.a.createElement(ge.a,{style:Se.tab,label:"Tasks chart",component:c.b,to:"/chart"})),a))}}]),t}(r.a.Component),Ie=Object(i.b)((function(e){return{inputError:e.UI.inputError,modalIsOpen:e.UI.modalIsOpen,tasks:e.tasksManager.tasks}}),(function(e){return{startedTaskCreation:Object(u.b)(b,e),finishedTaskCreation:Object(u.b)(E,e),modalControler:Object(u.b)(O,e),downloadLocalStore:Object(u.b)(g,e)}}))(De),je={div:{maxWidth:1440,margin:"0 auto"},tbody:{color:Y.a[900]},trow:{background:Y.a[100]},buttonInfo:{background:X.a[50],borderRadius:0},buttonDelete:{background:X.a[50],borderRadius:0}},Ce=Object(i.b)((function(e){return{tasks:e.tasksManager.tasks}}),(function(e){return{deleteTask:Object(u.b)(f,e)}}))((function(e){var t=e.tasks,a=e.deleteTask,n=t.filter((function(e){return e.isCompleted}));return r.a.createElement("div",{className:"tabs-main",style:je.div},r.a.createElement($.a,{className:"tasks-log"},r.a.createElement(q.a,null,r.a.createElement(Q.a,null,r.a.createElement(Z.a,{variant:"body"},"\u2116"),r.a.createElement(Z.a,{variant:"body"},"Task"),r.a.createElement(Z.a,{variant:"body"},"Time start"),r.a.createElement(Z.a,{variant:"body"},"Time end"),r.a.createElement(Z.a,{variant:"body"},"Time spend"),r.a.createElement(Z.a,{variant:"body"},"Info"),r.a.createElement(Z.a,{variant:"body"},"Delete"))),r.a.createElement(ee.a,{style:je.tbody},n.map((function(e,t){return r.a.createElement(Q.a,{id:e.id,key:e.id,style:je.trow},r.a.createElement(Z.a,{variant:"head"},r.a.createElement("div",null,t+1)),r.a.createElement(Z.a,{variant:"head"},r.a.createElement("div",null,e.name)),r.a.createElement(Z.a,{variant:"head"},r.a.createElement("div",null,new Date(e.start).toLocaleTimeString())),r.a.createElement(Z.a,{variant:"head"},r.a.createElement("div",null,new Date(e.end).toLocaleTimeString())),r.a.createElement(Z.a,{variant:"head"},r.a.createElement("div",null,ae(e.spend))),r.a.createElement(Z.a,{variant:"head"},r.a.createElement(te.a,{style:je.buttonInfo,type:"button",color:"primary",component:c.b,to:"/tasks/".concat(e.id)},"Info")),r.a.createElement(Z.a,{variant:"head"},r.a.createElement(te.a,{style:je.buttonDelete,type:"button",onClick:function(){a(e.id)},color:"primary"},"Delete")))})))))})),xe=function(){return r.a.createElement(Ie,{tabValue:0},r.a.createElement(Ce,null))},Ae=a(50),_e=function(e,t){for(var a=[],n=0,r=function(e){for(var r=t.filter((function(t){return t.hour===e})),o=r.map((function(e){return e.spend})),l=n,i=0;i<o.length;i+=1)l+=Math.floor(o[i]/1e3/60);var c=void 0!==r[0]?60-new Date(r[0].start).getMinutes()+n:60,s=l>c?(n=l-c,c):(n=0,l);a=[].concat(Object(d.a)(a),[{hour:e,duration:s}])},o=0;o<e;o+=1)r(o);return a},Le={button:{position:"fixed",bottom:50,right:50},margin:{top:50,right:20,bottom:50,left:20}},Re=function(){for(var e=function(e,t){return Math.round(Math.random()*(t-e)+e)},t=[],a=(new Date).getTime()-432e5,n=0;n<e(10,15);n++){var r=e(6e5,54e5),o=a+r;t=[].concat(Object(d.a)(t),[{id:a,start:a,end:o,spend:r,isCompleted:!0,hour:new Date(a).getHours(),name:"random task \u2116".concat(n+1)}]),a=o+e(0,6e5)}return t}(),Ne=Object(i.b)((function(e){return{tasks:e.tasksManager.tasks}}),(function(e){return{putTasks:Object(u.b)(h,e)}}))((function(e){var t=e.putTasks,a=e.tasks,n=_e(24,a);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae.e,{height:430},r.a.createElement(Ae.b,{data:n,margin:Le.margin},r.a.createElement(Ae.c,{strokeDasharray:"3 3"}),r.a.createElement(Ae.f,{dataKey:"hour",domain:[0,24]}),r.a.createElement(Ae.g,{domain:[0,60]}),r.a.createElement(Ae.d,null),r.a.createElement(Ae.a,{name:"Minuts in this hours",dataKey:"duration",fill:Y.a[900],width:30}))),r.a.createElement(te.a,{style:Le.button,variant:"contained",onClick:function(){t(Re)}},"generate"))})),Me=[{name:"log",path:"/log",component:xe},{name:"info",path:"/tasks/:id",component:ce},{name:"chart",path:"/chart",component:function(){return r.a.createElement(Ie,{tabValue:1},r.a.createElement(Ne,null))}}].map((function(e){var t=e.path,a=e.component,n=e.name;return r.a.createElement(s.b,{path:t,component:a,key:n})}));var He=function(){return r.a.createElement(i.a,{store:G},r.a.createElement(c.a,{basename:"/todoList/"},r.a.createElement(s.d,null,Me,r.a.createElement(s.a,{exact:!0,from:"/",to:"/log"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(He,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[238,1,2]]]);
//# sourceMappingURL=main.273dcdc7.chunk.js.map