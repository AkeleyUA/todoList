(this.webpackJsonphomework4=this.webpackJsonphomework4||[]).push([[0],{238:function(e,t,a){e.exports=a(433)},243:function(e,t,a){},244:function(e,t,a){},251:function(e,t,a){},433:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),c=a.n(o),l=(a(243),a(244),a(27)),i=a(29),s=a(48),u=a(18),m=a(77),d=a(23),p=a(49),b=function(e){return{type:"STARTED_TASK_CREATION",payload:e}},f=function(e){return{type:"FINISHED_TASK_CREATION",payload:e}},E=function(e){return{type:"DELETE_TASK",payload:e}},h=function(e){return{type:"PUT_TASKS",payload:e}},v=function(){return{type:"LOAD_PAGE"}},g={tasks:null!==localStorage.getItem("tasks")?JSON.parse(localStorage.getItem("tasks")):[],canAddTask:!1},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STARTED_TASK_CREATION":return Object(p.a)({},e,{tasks:[].concat(Object(d.a)(e.tasks),[{id:t.payload.start,start:t.payload.start,end:0,spend:0,isCompleted:t.payload.isCompleted,hour:t.payload.hour}])});case"FINISHED_TASK_CREATION":return Object(p.a)({},e,{tasks:e.tasks.map((function(a,n){return n===e.tasks.length-1?(a.name=t.payload.name,a.end=t.payload.end,a.spend=t.payload.end-a.start,a.isCompleted=t.payload.isCompleted,a):a}))});case"DELETE_TASK":return Object(p.a)({},e,{tasks:e.tasks.filter((function(e){return e.id!==t.payload}))});case"PUT_TASKS":return Object(p.a)({},e,{tasks:t.payload});default:return e}},y=function(e){return{type:"MODAL_CONTROLER",payload:e}},O=function(e){return{type:"INPUT_ERROR",payload:e}},T={inputError:!1,modalIsOpen:!1},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MODAL_CONTROLER":return Object(p.a)({},e,{modalIsOpen:t.payload});default:return e;case"INPUT_ERROR":return Object(p.a)({},e,{inputError:t.payload})}},j=a(19),x=a.n(j),I=a(32),S=x.a.mark(A),C=x.a.mark(_),D=x.a.mark(N),R=function(){return localStorage.removeItem("startLastTask")};function A(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.b)(R);case 2:case"end":return e.stop()}}),S)}function _(){var e;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(I.c)((function(e){return e.tasksManager.tasks[e.tasksManager.tasks.length-1].start}));case 2:e=t.sent,localStorage.setItem("startLastTask",e);case 4:case"end":return t.stop()}}),C)}function N(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.e)("STARTED_TASK_CREATION",_);case 2:return e.next=4,Object(I.e)("FINISHED_TASK_CREATION",A);case 4:case"end":return e.stop()}}),D)}var M=N,L=x.a.mark(W),H=x.a.mark(P),K=x.a.mark(U);function W(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.c)((function(e){return localStorage.setItem("tasks",JSON.stringify(e.tasksManager.tasks))}));case 2:case"end":return e.stop()}}),L)}function P(){var e;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(I.b)((function(){return Object(m.c)((function(e){var t=window.addEventListener("beforeunload",(function(){return e("page will unload"),!0}));return function(){t.remove(),e(m.a)}}))}));case 3:return e=t.sent,t.next=6,Object(I.d)(e);case 6:return t.next=8,Object(I.b)(W);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("error with listener");case 13:case"end":return t.stop()}}),H,null,[[0,10]])}function U(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.e)("LOAD_PAGE",P);case 2:case"end":return e.stop()}}),K)}var F=U,B=x.a.mark(J);function J(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.a)([M(),F()]);case 2:case"end":return e.stop()}}),B)}var V,z=Object(m.b)(),G=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,X=Object(u.d)((V={tasksManager:k,UI:w},function(e,t){var a={};return Object.entries(V).forEach((function(n){var r=void 0===e?e:e[n[0]];a[n[0]]=n[1](r,t)})),a}),G(Object(u.a)((function(e){return function(t){return function(a){var n=t(a);return console.log(n),console.log("new state: ",e.getState()),n}}}),z)));z.run(J);var Y=X,$=a(98),q=a(99),Q=a(453),Z=a(456),ee=a(457),te=a(458),ae=a(459),ne=a(460),re=function(e){var t=Math.floor(e/1e3/60/60%60),a=Math.floor(e/1e3/60%60),n=Math.floor(e/1e3%60);return"".concat(t<10?"0".concat(t):t," :\n    ").concat(a<10?"0".concat(a):a," :\n    ").concat(n<10?"0".concat(n):n)},oe={buttonDelete:{background:$.a[50],borderRadius:0},table:{maxWidth:1440,margin:"0 auto"},tableRow:{background:q.a[100]},tableBody:{color:q.a[900]},div:{width:"100%",textAlign:"center",padding:"30px 0"},buttonHome:{background:$.a[50],boxShadow:"0 0 3px rgba(0, 0, 0, 0.3)"}},ce=Object(l.b)((function(e){return{tasks:e.tasksManager.tasks}}),(function(e){return{deleteTask:Object(u.b)(E,e)}}))((function(e){var t=e.deleteTask,a=e.tasks,n=e.match,o=a.find((function(e){return e.id===+n.params.id}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{className:"tasks-log",style:oe.table},r.a.createElement(Z.a,null,r.a.createElement(ee.a,null,r.a.createElement(te.a,{variant:"body"},"ID"),r.a.createElement(te.a,{variant:"body"},"Task"),r.a.createElement(te.a,{variant:"body"},"Time start"),r.a.createElement(te.a,{variant:"body"},"Time end"),r.a.createElement(te.a,{variant:"body"},"Time spend"),r.a.createElement(te.a,{variant:"body"},"Delete"))),r.a.createElement(ae.a,{style:oe.tableBody},r.a.createElement(ee.a,{id:o.id,style:oe.tableRow},r.a.createElement(te.a,{variant:"head"},r.a.createElement("div",null,o.id)),r.a.createElement(te.a,{variant:"head"},r.a.createElement("div",null,o.name)),r.a.createElement(te.a,{variant:"head"},r.a.createElement("div",null,new Date(o.start).toLocaleTimeString())),r.a.createElement(te.a,{variant:"head"},r.a.createElement("div",null,new Date(o.end).toLocaleTimeString())),r.a.createElement(te.a,{variant:"head"},r.a.createElement("div",null,re(o.spend))),r.a.createElement(te.a,{variant:"head"},r.a.createElement(ne.a,{style:oe.buttonDelete,type:"button",component:i.b,onClick:function(){t(o.id)},to:"/log",color:"primary"},"Delete"))))),r.a.createElement("div",{style:oe.div},r.a.createElement(ne.a,{style:oe.buttonHome,size:"large",type:"button",color:"primary",component:i.b,to:"/log"},"Home")))})),le=a(469),ie={div:{maxWidth:1440,margin:"0 auto",textAlign:"center",padding:"30px 0"},button:{background:$.a[50],boxShadow:"0 0 3px rgba(0, 0, 0, 0.3)"}},se=function(e){var t=e.match;return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{severity:"error",style:{margin:30}},"A task with id: ".concat(t.params.id," does not exist.")),r.a.createElement("div",{style:ie.div},r.a.createElement(ne.a,{style:ie.button,size:"large",type:"button",color:"primary",component:i.b,to:"/"},"Home")))},ue=Object(l.b)((function(e){return{tasks:e.tasksManager.tasks}}))((function(e){var t=e.tasks,a=e.match;return void 0!==t.find((function(e){return+a.params.id===e.id}))?r.a.createElement(ce,{match:a}):r.a.createElement(se,{match:a})})),me=a(94),de=a(46),pe=a(189),be=a(190),fe=a(204),Ee=(a(251),a(463)),he=a(464),ve=a(471),ge=a(467),ke=a(468),ye=a(465),Oe=a(462),Te=a(100),we=a(470),je={div:{position:"absolute",top:"30%",left:"30%",width:600,height:100,background:$.a[50],border:"2px solid #000",padding:20},h2:{color:Te.a[500]},button:{color:Oe.a[500],position:"absolute",bottom:15,right:15}},xe=Object(l.b)((function(e){return{modalIsOpen:e.UI.modalIsOpen}}),(function(e){return{modalControler:Object(u.b)(y,e)}}))((function(e){var t=e.modalControler,a=e.modalIsOpen,n=function(){t(!1)};return r.a.createElement(we.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:a,onClose:n},r.a.createElement("div",{style:je.div},r.a.createElement("h2",{id:"simple-modal-title",style:je.h2},"Empty task name"),r.a.createElement("p",{id:"simple-modal-description"},"Your are tring close your task without name, enter the title and try again!"),r.a.createElement(ne.a,{style:je.button,onClick:n},"Close")))})),Ie={grid:{maxWidth:1440,margin:"0 auto"},input:{width:"300px",margin:"0 auto",display:"flex"},button:{margin:"0 auto 30px auto",display:"flex",boxShadow:"0 0 3px rgba(0, 0, 0, 0.3)"},tabs:{width:"100%",background:Oe.a[700]},tab:{color:$.a[50]}},Se=function(e){function t(e){var a;return Object(me.a)(this,t),(a=Object(pe.a)(this,Object(be.a)(t).call(this,e))).startHandler=function(){var e=a.props.startedTaskCreation,t={start:(new Date).getTime(),hour:(new Date).getHours(),isCompleted:!1};a.interval=setInterval((function(){return a.setState({timer:(new Date).getTime()-t.start})}),1e3),e(t)},a.stopHandler=function(){var e=a.props,t=e.finishedTaskCreation,n=e.modalControler,r=e.inputErrorControler,o=a.inputRef.current.value,c={end:(new Date).getTime(),name:o,isCompleted:!0};o.length>0?(clearInterval(a.interval),t(c),a.inputRef.current.value="",a.setState({timer:0}),r(!1)):(n(!0),a.inputRef.current.focus(),r(!0))},a.state={timer:e.tasks.length>0&&!e.tasks[e.tasks.length-1].isCompleted?(new Date).getTime()-e.tasks[e.tasks.length-1].start:0},a.inputRef=r.a.createRef(),a.interval=null,a}return Object(fe.a)(t,e),Object(de.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.tasks,n=t.loadPage,r=this.state.timer,o=!(a.length>0&&void 0!==a[a.length-1].isCompleted)||a[a.length-1].isCompleted;o?o&&0!==r&&(clearInterval(this.interval),0!==r&&e.setState({timer:0})):this.interval=setInterval((function(){return e.setState({timer:(new Date).getTime()-a[a.length-1].start})}),1e3),n()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.tasks,a=e.children,n=e.tabValue,o=e.inputError,c=!(t.length>0)||t[t.length-1].isCompleted,l=this.state.timer;return r.a.createElement("div",{style:{height:1e3}},r.a.createElement(xe,null),r.a.createElement(Ee.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:Ie.grid},r.a.createElement(he.a,{maxWidth:!1,className:"task-init"},r.a.createElement(ve.a,{id:"standard-basic",style:Ie.input,error:o,inputProps:{ref:this.inputRef,className:"input-task-name",style:{color:o?Te.a[500]:q.a[900],textAlign:"center"}},fullWidth:!0,placeholder:"Name of your task"}),r.a.createElement(ge.a,{className:"circle",color:"primary.main",fontWeight:500,fontSize:20},r.a.createElement("p",{className:"time"},re(l))),r.a.createElement(ne.a,{variant:"text",color:"primary",type:"submit",onClick:c?this.startHandler:this.stopHandler,style:Ie.button},c?"start":"stop")),r.a.createElement(ke.a,{style:Ie.tabs,variant:"fullWidth",value:n},r.a.createElement(ye.a,{style:Ie.tab,label:"Tasks log",component:i.b,to:"/log"}),r.a.createElement(ye.a,{style:Ie.tab,label:"Tasks chart",component:i.b,to:"/chart"})),a))}}]),t}(r.a.Component),Ce=Object(l.b)((function(e){return{inputError:e.UI.inputError,modalIsOpen:e.UI.modalIsOpen,tasks:e.tasksManager.tasks}}),(function(e){return{startedTaskCreation:Object(u.b)(b,e),finishedTaskCreation:Object(u.b)(f,e),modalControler:Object(u.b)(y,e),inputErrorControler:Object(u.b)(O,e),loadPage:Object(u.b)(v,e)}}))(Se),De={div:{maxWidth:1440,margin:"0 auto"},tbody:{color:q.a[900]},trow:{background:q.a[100]},buttonInfo:{background:$.a[50],borderRadius:0},buttonDelete:{background:$.a[50],borderRadius:0}},Re=Object(l.b)((function(e){return{tasks:e.tasksManager.tasks}}),(function(e){return{deleteTask:Object(u.b)(E,e)}}))((function(e){var t=e.tasks,a=e.deleteTask,n=t.filter((function(e){return e.isCompleted}));return r.a.createElement("div",{className:"tabs-main",style:De.div},r.a.createElement(Q.a,{className:"tasks-log"},r.a.createElement(Z.a,null,r.a.createElement(ee.a,null,r.a.createElement(te.a,{variant:"body"},"\u2116"),r.a.createElement(te.a,{variant:"body"},"Task"),r.a.createElement(te.a,{variant:"body"},"Time start"),r.a.createElement(te.a,{variant:"body"},"Time end"),r.a.createElement(te.a,{variant:"body"},"Time spend"),r.a.createElement(te.a,{variant:"body"},"Info"),r.a.createElement(te.a,{variant:"body"},"Delete"))),r.a.createElement(ae.a,{style:De.tbody},n.map((function(e,t){return r.a.createElement(ee.a,{id:e.id,key:e.id,style:De.trow},r.a.createElement(te.a,{variant:"head"},r.a.createElement("div",null,t+1)),r.a.createElement(te.a,{variant:"head"},r.a.createElement("div",null,e.name)),r.a.createElement(te.a,{variant:"head"},r.a.createElement("div",null,new Date(e.start).toLocaleTimeString())),r.a.createElement(te.a,{variant:"head"},r.a.createElement("div",null,new Date(e.end).toLocaleTimeString())),r.a.createElement(te.a,{variant:"head"},r.a.createElement("div",null,re(e.spend))),r.a.createElement(te.a,{variant:"head"},r.a.createElement(ne.a,{style:De.buttonInfo,type:"button",color:"primary",component:i.b,to:"/tasks/".concat(e.id)},"Info")),r.a.createElement(te.a,{variant:"head"},r.a.createElement(ne.a,{style:De.buttonDelete,type:"button",onClick:function(){a(e.id)},color:"primary"},"Delete")))})))))})),Ae=function(){return r.a.createElement(Ce,{tabValue:0},r.a.createElement(Re,null))},_e=a(51),Ne=function(e,t){for(var a=[],n=0,r=function(e){for(var r=t.filter((function(t){return t.hour===e})),o=r.map((function(e){return e.spend})),c=n,l=0;l<o.length;l+=1)c+=Math.floor(o[l]/1e3/60);var i=void 0!==r[0]?60-new Date(r[0].start).getMinutes()+n:60,s=c>i?(n=c-i,i):(n=0,c);a=[].concat(Object(d.a)(a),[{hour:e,duration:s}])},o=0;o<e;o+=1)r(o);return a},Me={button:{position:"fixed",bottom:50,right:50},margin:{top:50,right:20,bottom:50,left:20}},Le=function(){for(var e=function(e,t){return Math.round(Math.random()*(t-e)+e)},t=[],a=(new Date).getTime()-432e5,n=0;n<e(10,15);n++){var r=e(6e5,54e5),o=a+r;t=[].concat(Object(d.a)(t),[{id:a,start:a,end:o,spend:r,isCompleted:!0,hour:new Date(a).getHours(),name:"random task \u2116".concat(n+1)}]),a=o+e(0,6e5)}return t}(),He=Object(l.b)((function(e){return{tasks:e.tasksManager.tasks}}),(function(e){return{putTasks:Object(u.b)(h,e)}}))((function(e){var t=e.putTasks,a=e.tasks,n=Ne(24,a);return r.a.createElement(r.a.Fragment,null,r.a.createElement(_e.e,{height:430},r.a.createElement(_e.b,{data:n,margin:Me.margin},r.a.createElement(_e.c,{strokeDasharray:"3 3"}),r.a.createElement(_e.f,{dataKey:"hour",domain:[0,24]}),r.a.createElement(_e.g,{domain:[0,60]}),r.a.createElement(_e.d,null),r.a.createElement(_e.a,{name:"Minuts in this hours",dataKey:"duration",fill:q.a[900],width:30}))),r.a.createElement(ne.a,{style:Me.button,variant:"contained",onClick:function(){t(Le)}},"generate"))})),Ke=[{name:"log",path:"/log",component:Ae},{name:"info",path:"/tasks/:id",component:ue},{name:"chart",path:"/chart",component:function(){return r.a.createElement(Ce,{tabValue:1},r.a.createElement(He,null))}}].map((function(e){var t=e.path,a=e.component,n=e.name;return r.a.createElement(s.b,{path:t,component:a,key:n})}));var We=function(){return r.a.createElement(l.a,{store:Y},r.a.createElement(i.a,{basename:"/todoList/"},r.a.createElement(s.d,null,Ke,r.a.createElement(s.a,{exact:!0,from:"/",to:"/log"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(We,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[238,1,2]]]);
//# sourceMappingURL=main.004f42c4.chunk.js.map