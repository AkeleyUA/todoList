(this.webpackJsonphomework4=this.webpackJsonphomework4||[]).push([[0],{238:function(e,t,a){e.exports=a(433)},243:function(e,t,a){},244:function(e,t,a){},250:function(e,t,a){},433:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),c=a.n(o),i=(a(243),a(244),a(28)),s=a(30),l=a(14),u=a(203),d=a(23),m=a(37),p=function(e){return{type:"STARTED_TASK_CREATION",payload:e}},b=function(e){return{type:"FINISHED_TASK_CREATION",payload:e}},E=function(e){return{type:"DELETE_TASK",payload:e}},f=function(e){return{type:"PUT_TASKS",payload:e}},h=function(){return{type:"UPLOAD_LOCAL_STOREGE"}},v=function(){return{type:"DOWNLOAD_LOCAL_STOREGE"}},k=function(e){return{type:"VERIFICATION_INPUT",payload:e}},g={tasks:[],canAddTask:!1},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STARTED_TASK_CREATION":return Object(m.a)({},e,{tasks:[].concat(Object(d.a)(e.tasks),[{id:t.payload.start,start:t.payload.start,end:0,spend:0,isCompleted:t.payload.isCompleted,hour:t.payload.hour}])});case"FINISHED_TASK_CREATION":return Object(m.a)({},e,{tasks:e.tasks.map((function(a,n){return n===e.tasks.length-1?(a.name=t.payload.name,a.end=t.payload.end,a.spend=t.payload.end-a.start,a.isCompleted=t.payload.isCompleted,a):a}))});case"DELETE_TASK":return Object(m.a)({},e,{tasks:e.tasks.filter((function(e){return e.id!==t.payload}))});case"PUT_TASKS":return Object(m.a)({},e,{tasks:t.payload});case"VERIFICATION_INPUT":return Object(m.a)({},e,{canAddTask:t.payload});default:return e}},O=function(e){return{type:"CHANGE_ERROR_STATUS",payload:e}},T=function(e){return{type:"TAB_CHANGE_ACTIVE",payload:e}},S=function(e){return{type:"MODAL_CONTROLER",payload:e}},I={inputError:!1,modalIsOpen:!1,tabValue:0},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_ERROR_STATUS":return Object(m.a)({},e,{inputError:t.payload});case"MODAL_CONTROLER":return Object(m.a)({},e,{modalIsOpen:t.payload});case"TAB_CHANGE_ACTIVE":return Object(m.a)({},e,{tabValue:t.payload});default:return e}},w=a(19),j=a.n(w),C=a(25),x=j.a.mark(M),_=j.a.mark(U),D=j.a.mark(V),L=j.a.mark(K),R=function(){return null!==localStorage.getItem("tasks")?JSON.parse(localStorage.getItem("tasks")):[]},N=function(){return localStorage.removeItem("startLastTask")};function M(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.b)(N);case 2:case"end":return e.stop()}}),x)}function U(){var e,t;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(C.d)((function(e){return e.tasksManager.tasks}));case 2:return e=a.sent,a.next=5,Object(C.d)((function(e){return e.tasksManager.tasks[e.tasksManager.tasks.length-1].start}));case 5:t=a.sent,localStorage.setItem("startLastTask",t),localStorage.setItem("tasks",JSON.stringify(e));case 8:case"end":return a.stop()}}),_)}function V(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(C.b)(R);case 2:return e=t.sent,t.next=5,Object(C.c)(f(e));case 5:case"end":return t.stop()}}),D)}function K(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.e)("UPLOAD_LOCAL_STOREGE",V);case 2:return e.next=4,Object(C.e)("STARTED_TASK_CREATION",U);case 4:return e.next=6,Object(C.e)("FINISHED_TASK_CREATION",M);case 6:case"end":return e.stop()}}),L)}var H=K,W=j.a.mark(F),P=j.a.mark(G);function F(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(C.d)((function(e){return e.tasksManager.tasks}));case 2:e=t.sent,localStorage.removeItem("tasks"),localStorage.setItem("tasks",JSON.stringify(e));case 5:case"end":return t.stop()}}),W)}function G(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.e)("DOWNLOAD_LOCAL_STOREGE",F);case 2:return e.next=4,Object(C.e)("DELETE_TASK",F);case 4:return e.next=6,Object(C.e)("PUT_TASKS",F);case 6:case"end":return e.stop()}}),P)}var B=G,J=j.a.mark(z);function z(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.a)([B(),H()]);case 2:case"end":return e.stop()}}),J)}var X,Y=Object(u.a)(),$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,q=Object(l.d)((X={tasksManager:y,UI:A},function(e,t){var a={};return Object.entries(X).forEach((function(n){var r=void 0===e?e:e[n[0]];a[n[0]]=n[1](r,t)})),a}),$(Object(l.a)((function(e){return function(t){return function(a){var n=t(a);return console.log(n),console.log("new state: ",e.getState()),n}}}),Y)));Y.run(z);var Q=q,Z=a(49),ee=a(91),te=a(47),ae=a(187),ne=a(188),re=a(204),oe=(a(250),a(457)),ce=a(458),ie=a(471),se=a(467),le=a(454),ue=a(468),de=a(460),me=a(98),pe=a(99),be=a(456),Ee=a(97),fe=a(470),he=Object(i.b)((function(e){return{modalIsOpen:e.UI.modalIsOpen}}),(function(e){return{modalControler:Object(l.b)(S,e)}}))((function(e){var t=e.modalControler,a=e.modalIsOpen,n=function(){t(!1)};return r.a.createElement(fe.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:a,onClose:n},r.a.createElement("div",{style:{position:"absolute",top:"30%",left:"30%",width:600,height:100,background:Ee.a[50],border:"2px solid #000",padding:20}},r.a.createElement("h2",{id:"simple-modal-title",style:{color:me.a[500]}},"Empty task name"),r.a.createElement("p",{id:"simple-modal-description"},"Your are tring close your task without name, enter the title and try again!"),r.a.createElement(le.a,{style:{color:be.a[500],position:"absolute",bottom:15,right:15},onClick:n},"Close")))})),ve=function(e){var t=Math.floor(e/1e3/60/60%60),a=Math.floor(e/1e3/60%60),n=Math.floor(e/1e3%60);return"".concat(t<10?"0".concat(t):t," :\n    ").concat(a<10?"0".concat(a):a," :\n    ").concat(n<10?"0".concat(n):n)},ke=function(e){function t(e){var a;return Object(ee.a)(this,t),(a=Object(ae.a)(this,Object(ne.a)(t).call(this,e))).addInterval=function(){var e=a.props.startedTaskCreation,t={start:(new Date).getTime(),hour:(new Date).getHours(),isCompleted:!1},n=setInterval((function(){return a.setState({timer:(new Date).getTime()-t.start})}),1e3);e(t),a.setState({interval:n})},a.removeInterval=function(){var e=a.state.interval,t=a.props,n=t.canAddTask,r=t.verificationInput,o=t.changeErrorStatus,c=t.finishedTaskCreation,i=t.modalControler,s={end:(new Date).getTime(),name:a.inputRef.current.value,isCompleted:!0};n?(clearInterval(e),c(s),o(!1),r(!1),a.inputRef.current.value="",a.setState({timer:0})):(i(!0),o(!0),r(!1),a.inputRef.current.focus())},a.inputErrorControler=function(){var e=a.props,t=e.verificationInput,n=e.changeErrorStatus,r=e.canAddTask,o=e.inputError,c=a.inputRef.current.value;r&&!c?t(!1):!r&&c&&t(!0),o||c?o&&c&&n(!1):n(!0)},a.state={timer:e.tasks.length>0&&!e.tasks[e.tasks.length-1].isCompleted?(new Date).getTime()-e.tasks[e.tasks.length-1].start:0,interval:null},a.inputRef=r.a.createRef(),a}return Object(re.a)(t,e),Object(te.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.uploadLocalStore)()}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.tasks,a=this.state,n=a.interval,r=a.timer,o=!(t.length>0&&void 0!==t[t.length-1].isCompleted)||t[t.length-1].isCompleted;if(null!==n||o)null!==n&&o&&0!==r&&(clearInterval(n),this.setState({timer:0}));else{var c=setInterval((function(){return e.setState({timer:(new Date).getTime()-t[t.length-1].start})}),1e3);this.setState({interval:c})}}},{key:"componentWillUnmount",value:function(){(0,this.props.downloadLocalStore)()}},{key:"render",value:function(){var e=this.props,t=e.inputError,a=e.tabValue,n=e.tasks,o=e.children,c=!(n.length>0)||n[n.length-1].isCompleted,i=this.state.timer,l={grid:{maxWidth:1440,margin:"0 auto"},input:{width:"300px",margin:"0 auto",display:"flex"},inputProps:{color:t?me.a[500]:pe.a[900],textAlign:"center"},button:{margin:"0 auto 30px auto",display:"flex",boxShadow:"0 0 3px rgba(0, 0, 0, 0.3)"},tabs:{width:"100%",background:be.a[700]},tab:{color:Ee.a[50]}};return r.a.createElement("div",{style:{height:1e3}},r.a.createElement(he,null),r.a.createElement(oe.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:l.grid},r.a.createElement(ce.a,{maxWidth:!1,className:"task-init"},r.a.createElement(ie.a,{id:"standard-basic",style:l.input,error:t,inputProps:{ref:this.inputRef,className:"input-task-name",style:l.inputProps},fullWidth:!0,placeholder:"Name of your task",onChange:this.inputErrorControler}),r.a.createElement(se.a,{className:"circle",color:"primary.main",fontWeight:"500",fontSize:20},r.a.createElement("p",{className:"time"},ve(i))),r.a.createElement(le.a,{variant:"text",color:"primary",type:"submit",onClick:c?this.addInterval:this.removeInterval,style:l.button},c?"start":"stop")),r.a.createElement(ue.a,{style:l.tabs,variant:"fullWidth",value:a},r.a.createElement(de.a,{style:l.tab,label:"Tasks log",component:s.b,to:"/todoList/"}),r.a.createElement(de.a,{style:l.tab,label:"Tasks chart",component:s.b,to:"/todoList/tasks-chart"})),o))}}]),t}(r.a.Component),ge=Object(i.b)((function(e){return{inputError:e.UI.inputError,tabValue:e.UI.tabValue,modalIsOpen:e.UI.modalIsOpen,canAddTask:e.tasksManager.canAddTask,tasks:e.tasksManager.tasks}}),(function(e){return{changeErrorStatus:Object(l.b)(O,e),verificationInput:Object(l.b)(k,e),startedTaskCreation:Object(l.b)(p,e),finishedTaskCreation:Object(l.b)(b,e),modalControler:Object(l.b)(S,e),uploadLocalStore:Object(l.b)(h,e),downloadLocalStore:Object(l.b)(v,e)}}))(ke),ye=a(461),Oe=a(462),Te=a(463),Se=a(464),Ie=a(465),Ae=Object(i.b)((function(e){return{tasks:e.tasksManager.tasks,tabValue:e.UI.tabValue}}),(function(e){return{deleteTask:Object(l.b)(E,e),changeTabActive:Object(l.b)(T,e)}}))((function(e){var t=e.tasks,a=e.deleteTask,n=e.changeTabActive,o=e.tabValue,c=t.filter((function(e){return e.isCompleted}));return 0!==o&&n(0),r.a.createElement("div",{className:"tabs-main",style:{maxWidth:1440,margin:"0 auto"}},r.a.createElement(ye.a,{className:"tasks-log"},r.a.createElement(Oe.a,null,r.a.createElement(Te.a,null,r.a.createElement(Se.a,{variant:"body"},"\u2116"),r.a.createElement(Se.a,{variant:"body"},"Task"),r.a.createElement(Se.a,{variant:"body"},"Time start"),r.a.createElement(Se.a,{variant:"body"},"Time end"),r.a.createElement(Se.a,{variant:"body"},"Time spend"),r.a.createElement(Se.a,{variant:"body"},"Info"),r.a.createElement(Se.a,{variant:"body"},"Delete"))),r.a.createElement(Ie.a,{style:{color:pe.a[900]}},c.map((function(e,t){return r.a.createElement(Te.a,{id:e.id,key:e.id,style:{background:pe.a[100]}},r.a.createElement(Se.a,{variant:"head"},r.a.createElement("div",null,t+1)),r.a.createElement(Se.a,{variant:"head"},r.a.createElement("div",null,e.name)),r.a.createElement(Se.a,{variant:"head"},r.a.createElement("div",null,new Date(e.start).toLocaleTimeString())),r.a.createElement(Se.a,{variant:"head"},r.a.createElement("div",null,new Date(e.end).toLocaleTimeString())),r.a.createElement(Se.a,{variant:"head"},r.a.createElement("div",null,ve(e.spend))),r.a.createElement(Se.a,{variant:"head"},r.a.createElement(le.a,{style:{background:Ee.a[50],borderRadius:0},type:"button",color:"primary",component:s.b,to:"/task/".concat(e.id)},"Info")),r.a.createElement(Se.a,{variant:"head"},r.a.createElement(le.a,{style:{background:Ee.a[50],borderRadius:0},type:"button",onClick:function(){a(e.id)},color:"primary"},"Delete")))})))))})),we=a(51),je=function(){for(var e=function(e,t){return Math.round(Math.random()*(t-e)+e)},t=[],a=(new Date).getTime()-432e5,n=0;n<e(10,15);n++){var r=e(6e5,54e5),o=a+r;t=[].concat(Object(d.a)(t),[{id:a,start:a,end:o,spend:r,isCompleted:!0,hour:new Date(a).getHours(),name:"random task \u2116".concat(n+1)}]),a=o+e(0,6e5)}return t},Ce=function(e,t){for(var a=[],n=0,r=function(e){for(var r=t.filter((function(t){return t.hour===e})),o=r.map((function(e){return e.spend})),c=n,i=0;i<o.length;i+=1)c+=Math.floor(o[i]/1e3/60);var s=void 0!==r[0]?60-new Date(r[0].start).getMinutes()+n:60,l=c>s?(n=c-s,s):(n=0,c);a=[].concat(Object(d.a)(a),[{hour:e,duration:l}])},o=0;o<e;o+=1)r(o);return a},xe=Object(i.b)((function(e){return{tasks:e.tasksManager.tasks,tabValue:e.UI.tabValue}}),(function(e){return{putTasks:Object(l.b)(f,e),changeTabActive:Object(l.b)(T,e)}}))((function(e){var t=e.putTasks,a=e.tasks,n=e.changeTabActive,o=e.tabValue,c=Ce(24,a);return 1!==o&&n(1),r.a.createElement(r.a.Fragment,null,r.a.createElement(we.e,{height:430},r.a.createElement(we.b,{data:c,margin:{top:50,right:20,bottom:50,left:20}},r.a.createElement(we.c,{strokeDasharray:"3 3"}),r.a.createElement(we.f,{dataKey:"hour",domain:[0,24]}),r.a.createElement(we.g,{domain:[0,60]}),r.a.createElement(we.d,null),r.a.createElement(we.a,{name:"Minuts in this hours",dataKey:"duration",fill:pe.a[900],width:30}))),r.a.createElement(le.a,{style:{position:"fixed",bottom:50,right:50},variant:"contained",onClick:function(){var e=je();t(e)}},"generate"))})),_e=Object(i.b)((function(e){return{tasks:e.tasksManager.tasks}}),(function(e){return{deleteTask:Object(l.b)(E,e)}}))((function(e){var t=e.deleteTask,a=e.tasks,n=e.match,o=a.find((function(e){return e.id===+n.params.id})),c={buttonDelete:{background:Ee.a[50],borderRadius:0},table:{maxWidth:1440,margin:"0 auto"},tableRow:{background:pe.a[100]},tableBody:{color:pe.a[900]},div:{width:"100%",textAlign:"center",padding:"30px 0"},buttonHome:{background:Ee.a[50],boxShadow:"0 0 3px rgba(0, 0, 0, 0.3)"}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{className:"tasks-log",style:c.table},r.a.createElement(Oe.a,null,r.a.createElement(Te.a,null,r.a.createElement(Se.a,{variant:"body"},"ID"),r.a.createElement(Se.a,{variant:"body"},"Task"),r.a.createElement(Se.a,{variant:"body"},"Time start"),r.a.createElement(Se.a,{variant:"body"},"Time end"),r.a.createElement(Se.a,{variant:"body"},"Time spend"),r.a.createElement(Se.a,{variant:"body"},"Delete"))),r.a.createElement(Ie.a,{style:c.tableBody},r.a.createElement(Te.a,{id:o.id,style:c.tableRow},r.a.createElement(Se.a,{variant:"head"},r.a.createElement("div",null,o.id)),r.a.createElement(Se.a,{variant:"head"},r.a.createElement("div",null,o.name)),r.a.createElement(Se.a,{variant:"head"},r.a.createElement("div",null,new Date(o.start).toLocaleTimeString())),r.a.createElement(Se.a,{variant:"head"},r.a.createElement("div",null,new Date(o.end).toLocaleTimeString())),r.a.createElement(Se.a,{variant:"head"},r.a.createElement("div",null,ve(o.spend))),r.a.createElement(Se.a,{variant:"head"},r.a.createElement(le.a,{style:c.buttonDelete,type:"button",component:s.b,onClick:function(){t(o.id)},to:"/todoList/",color:"primary"},"Delete"))))),r.a.createElement("div",{style:c.div},r.a.createElement(le.a,{style:c.buttonHome,size:"large",type:"button",color:"primary",component:s.b,to:"/todoList"},"Home")))})),De=a(469),Le=function(e){var t=e.match;return r.a.createElement(r.a.Fragment,null,r.a.createElement(De.a,{severity:"error",style:{margin:30}},"A task with id: ",t.params.id," does not exist."),r.a.createElement("div",{style:{maxWidth:1440,margin:"0 auto",textAlign:"center",padding:"30px 0"}},r.a.createElement(le.a,{style:{background:Ee.a[50],boxShadow:"0 0 3px rgba(0, 0, 0, 0.3)"},size:"large",type:"button",color:"primary",component:s.b,to:"/todoList/"},"Home")))},Re=[{path:"/todoList",component:function(){var e=[{path:"/todoList",component:Ae},{path:"/todoList/tasks-chart",component:xe}].map((function(e,t){var a=e.path,n=e.component;return r.a.createElement(Z.a,{exact:!0,path:a,component:n,key:t})}));return r.a.createElement(ge,null,e)}},{path:"/task/:id",component:Object(i.b)((function(e){return{tasks:e.tasksManager.tasks}}),(function(e){return{uploadLocalStore:Object(l.b)(h,e)}}))((function(e){var t=e.tasks,a=e.match,o=e.uploadLocalStore,c=t.find((function(e){return+a.params.id===e.id}));return Object(n.useEffect)((function(){o()}),[o]),void 0!==c?r.a.createElement(_e,{match:a}):r.a.createElement(Le,{match:a})}))}].map((function(e,t){var a=e.path,n=e.component;return r.a.createElement(Z.a,{path:a,component:n,key:t})}));var Ne=function(){return r.a.createElement(i.a,{store:Q},r.a.createElement(s.a,null,Re))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[238,1,2]]]);
//# sourceMappingURL=main.a93480a5.chunk.js.map